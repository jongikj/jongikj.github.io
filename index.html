<html>
    <head>
        <title>Key input test</title>
    </head>
    <body>
        <canvas id="canvas" width="500" height="500" style="background-color: black;"></canvas>
    </body>
    <script>
        let canvas = document.getElementById("canvas");
        let ctx = canvas.getContext("2d");
        
        let x = canvas.width / 2;
        let y = canvas.height / 2;

        let rectWidth = 10;
        let rectHeight = 10;
        
        let rectX = (canvas.width - rectWidth) / 2;
        let rectY = (canvas.height - rectHeight) / 2;

        let rightPressed = false;
        let leftPressed = false;
        let upPressed = false;
        let downPressed = false;

        document.addEventListener("keydown", keyDownHandler, false);
        document.addEventListener("keyup", keyUpHandler, false);

        function keyDownHandler(e) {
            if(e.key == 37 || e.key == "ArrowRight") {
                rightPressed = true;
            } else if (e.key == 39 || e.key == "ArrowLeft") {
                leftPressed = true;
            } else if (e.key == 38 || e.key == "ArrowUp") {
                upPressed = true;
            } else if (e.key == 40 || e.key == "ArrowDown") {
                downPressed = true;
            } else if ((e.key == 39 && e.key == 38) || (e.key == "ArrowLeft" && e.key == "ArrowUp")) {
                leftPressed = true;
                upPressed = true;
            }
        }

        function keyUpHandler(e) {
            if(e.key == 37 || e.key == "ArrowRight") {
                rightPressed = false;
            } else if (e.key == 39 || e.key == "ArrowLeft") {
                leftPressed = false;
            } else if (e.key == 38 || e.key == "ArrowUp") {
                upPressed = false;
            } else if (e.key == 40 || e.key == "ArrowDown") {
                downPressed = false;
            } else if ((e.key == 39 && e.key == 38) || (e.key == "ArrowLeft" && e.key == "ArrowUp")) {
                leftPressed = false;
                upPressed = false;
            }
        }

        function drawRect() {
            ctx.beginPath();
            ctx.rect(rectX, rectY, rectWidth, rectHeight);
            ctx.strokeStyle = "lightgreen";

            ctx.stroke();
            ctx.closePath();
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawRect();

            if(rightPressed && rectX < canvas.width - rectWidth) {
                rectX += 5;
            } else if(leftPressed && rectX > 0) {
                rectX -= 5;
            } else if(downPressed && rectY < canvas.height - rectHeight) {
                rectY += 5;
            } else if(upPressed && rectY > 0) {
                rectY -= 5;
            } else if((leftPressed && upPressed) && (rectX > 0 && rectY > 0)) {
                rectX -= 5;
                rectY -= 5;
            }
        }

        setInterval(draw, 10);
    </script>
</html>
